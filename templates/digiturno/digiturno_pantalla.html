<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>Proyección | Health Clinic</title>

		<link rel="shortcut icon" href="/static/img/favicon.png" />
		<link rel="stylesheet" href="/static/assets/css/core/libs.min.css" />
		<link rel="stylesheet" href="/static/assets/css/hope-ui.min.css?v=1.2.0" />
		<link rel="stylesheet" href="/static/assets/css/custom.min.css?v=1.2.0" />
		<link rel="stylesheet" href="/static/assets/css/dark.min.css"/>
		<link rel="stylesheet" href="/static/assets/css/customizer.min.css" /> 
		<link rel="stylesheet" href="/static/assets/css/rtl.min.css"/>
		<link href="/static/css/videojs.css" rel="stylesheet" />
		<style>
			.parpadea {
				animation-name: parpadeo;
				animation-duration: 1.5s;
				animation-timing-function: linear;
				animation-iteration-count: infinite;

				-webkit-animation-name:parpadeo;
				-webkit-animation-duration: 1.5s;
				-webkit-animation-timing-function: linear;
				-webkit-animation-iteration-count: infinite;
				text-shadow: -3px 2px 0 #ffffff, -8px 2px 0 #535353;
			}

			@-moz-keyframes parpadeo{  
				0% { opacity: 1.0; }
				50% { opacity: 0.0; }
				100% { opacity: 1.0; }
			}

			@-webkit-keyframes parpadeo {  
				0% { opacity: 1.0; }
				50% { opacity: 0.0; }
				100% { opacity: 1.0; }
			}

			@keyframes parpadeo {  
				0% { opacity: 1.0; }
				50% { opacity: 0.0; }
				100% { opacity: 1.0; }
			}
		</style>
	</head>
	<body class="boxed">
		<div class="boxed-inner">
			<main class="main-content">
				<nav class="nav navbar navbar-expand-lg navbar-light iq-navbar p-0">
				  <div class="container-fluid navbar-inner p-0">
					<div class="logo-center navbar-brand col-1 ms-0">
						<img src="/static/img/logo2.jpg" style="width:160px;">
					</div>
					<div class="col-11 justify-content-center text-center">
						<h1 class="logo-title text-primary"><strong>SOCIEDAD DE ESPECIALISTAS DE GIRARDOT S.A.S</strong></h1>
						<p class="mb-0">Nit: 890601210-9<br>Calle 13 No. 10 - 65. Barrio San Miguel<br>Girardot (Cundinamarca)</p>
					</div>
				  </div>
				</nav>        
			
				<div class="conatiner-fluid p-2 pb-0">
					<div class="row">
						<div class="col-12 col-sm-6 col-lg-7" style="padding-right: 0px;">
							<div class="col-md-12">
								<div class="card" style="background-color:black;">
									<div class="card-body p-1">
										<div class="col-12" id="videos">
											<video id="video" class="video-js" controls autoplay playsinline preload="auto" data-setup="{}" style="width: 100%; height:640px;">
												<source src="http://192.168.16.247:8081/dash/1234.mpd" type="application/dash+xml" />
											</video> 
										</div>
									</div>
								</div>
							</div> 
						</div>
						<div class="col-12 col-sm-6 col-lg-5">
							<div class="col-12">
								<div class="row align-items-center">	
									<div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
										<div class="carousel-inner text-center">
											<div class="carousel-item active">
												<img src="/static/img/logo.jpg" height="350px;">
											</div>
											{% for i in imgs %}
												<div class="carousel-item">
													<img src="/static/img/slide/{{ i }}" style="width:100%; height:350px;">
												</div>
											{% endfor %}
										</div>
									</div>							
								</div>
							</div>
							<div class="col-12 mt-3">
								<div class="card mb-0">
									<div class="card-body text-center p-1">
										<div class="col-12">
											<h4 class="mb-1"><small>Horario de visitas Urgencias</small></h4>
											<p class="mb-0 text-secondary" style="font-size: 13pt;">
												De 10:00 am a 12:00 m y de 4:00 pm a 6:00 pm
											</p>
										</div>
										<hr class="m-1 p-0">
										<div class="col-12 mt-1">
											<h4 class="mb-2"><small>Horario de visitas Hospitalización</small></h4>
											<p class="mb-0 text-secondary" style="font-size: 13pt;">
												De 10:00 am a 12:00 m y de 3:00 pm a 7:00 pm
											</p>
										</div>
										<hr class="m-1 p-0">
										<div class="col-12 mt-1">
											<h4 class="mb-1"><small>Contáctenos</small></h4>
											<p class="mb-0 text-secondary" style="font-size: 13pt;">
												<strong>PBX:</strong> (601) 7943221<br>
												<strong>Whatsapp:</strong> 3174336095 - 3174336098<br>
												<strong>Email:</strong> segl@clinicadeespecialistasgirardot.com<br>
												<strong>Website:</strong> www.clinicadeespecialistasgirardot.com
											</p>
										</div>
								   </div>
								</div>  
							</div> 
						</div> 
						<div class="col-12">
							<div class="card mb-0">
								<div class="card-body d-flex justify-content-around text-center p-1">
                                    {% for m in modulos %}
                                        <div>
                                            <p id="moduloAnun-{{ m.modulo }}" style="font-size:28pt;" class="mb-0 text-{% if m.turno == 'N/D' %}secondary{% else %}primary{% endif %}">
                                                <strong>Modulo {{ m.modulo }}</strong>
                                            </p>
                                            <h1 class="mb-2" id="modulo-{{ m.modulo }}" style="font-size: 72pt; font-weight: 900;">
                                                <strong>{% if m.turno == 'N/D' %}{% else %}{{ m.turno }}{% endif %}</strong>
                                            </h1>
                                        </div>
                                        <hr class="hr-vertial">
									{% endfor %}
							   </div>
							</div>  
						</div>
					</div>
				</div>

                <!-- Modal -->
                <div class="modal fade" id="turno-pantalla" tabindex="-1" aria-labelledby="turno-pantallaLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-xl">
                        <div class="modal-content border-primary" style="border: solid 10px;">
                            <div class="modal-body d-flex justify-content-around text-center">
                                <div style="display: none;">
                                    <audio id="anuncio_turno" src=""></audio>
                                </div>
                                <div>
                                    <p style="font-size:70pt;" class="mb-0 text-primary">
                                        <strong>Turno</strong>
                                    </p>
                                    <hr class="p-1 bg-primary">
                                    <h1 class="mb-2" style="font-size: 100pt;">
                                        <strong id="turnoAnun"></strong>
                                    </h1>
                                </div>
                                <hr class="hr-vertial p-1">
                                <div>
                                    <p style="font-size:70pt;" class="mb-0 text-primary">
                                        <strong>Módulo</strong>
                                    </p>
                                    <hr class="p-1 bg-primary">
                                    <h1 class="mb-2" style="font-size:96pt;">
                                        <strong id="moduloAnun"></strong>
                                    </h1>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- fin modal -->
				<footer class="footer">
					<div class="footer-body">
						<ul class="left-panel list-inline mb-0 p-0"></ul>
						<div class="right-panel">
							©<script>document.write(new Date().getFullYear())</script> Sociedad de Especialistas de Girardot S.A.S
						</div>
					</div>
				</footer>     
			</main>
		</div>
		<script src="/static/assets/js/core/libs.min.js"></script>
		<script src="/static/assets/js/core/external.min.js"></script>
		<script src="/static/assets/js/charts/widgetcharts.js"></script>
		<script src="/static/assets/js/charts/vectore-chart.js"></script>
		<script src="/static/assets/js/charts/dashboard.js" ></script>
		<script src="/static/assets/js/plugins/fslightbox.js"></script>
		<script src="/static/assets/js/plugins/setting.js"></script>
		<script src="/static/assets/js/plugins/slider-tabs.js"></script>
		<script src="/static/assets/js/plugins/form-wizard.js"></script>
		<script src="/static/assets/js/hope-ui.js" defer></script>
		<script src="/static/js/videojs.js"></script>

		<script>
            function sleep(milliseconds) {
                var start = new Date().getTime();
                    for (var i = 0; i < 1e7; i++) {
                        if ((new Date().getTime() - start) > milliseconds){
                        break;
                    }
                }
            }

            function muted(){
                if( $("video").prop('muted') ) {
                      $("video").prop('muted', false);
                } else {
					$("video").prop('muted', true);
                }
            }
            $(window).ready(function(){
                setInterval( function() {
                    $.ajax({
                        url:   '{% url "anuncios" %}',
                        type:  'get',
                        success:  function (data) {
                            if (data != "") {
                                $('#turnoAnun').text("");
                                $('#moduloAnun').text("");
                                $('#turnoAnun').text(data.turno);
                                $('#moduloAnun').text(data.modulo);
								$("#modulo-"+data.modulo).addClass("parpadea");
                                $('#turno-pantalla').modal("show");
                                $("#anuncio_turno").removeAttr('src');
                                $("#anuncio_turno").prop('src', data.audio);
                                muted();
                                anuncio_turno.play();
                                $.ajax({
                                    url:   '{% url "anuncio_save" %}',
                                    type:  'get',
                                    data: {'id-digiturno': data.id}
                                });
                                setTimeout(muted, 5000);
                                setTimeout(function() {
                                    $('#turno-pantalla').modal("hide");
                                }, 5000);
								setTimeout(function() {
                                    $("#modulo-"+data.modulo).removeClass("parpadea");
                                }, 20000);
                            }
                        }
                    });
                },5000);

                setInterval( function() {
                    $.ajax({
                        url:   '{% url "proyeccion_turnos" %}',
                        type:  'get',
                        success:  function (data) {
                            for (var i = 0, limit = (data).length; i < limit; i++) {
                                var no_turno = data[i].turno;
                                if (no_turno < 10){
                                    no_turno = "00"+no_turno;
                                }else if (no_turno < 100){
                                    no_turno = "0"+no_turno;
                                }

                                if ( no_turno == "000"){
                                    no_turno = "N/D"
                                }
                                if(no_turno != 'N/D'){
                                    $("#modulo-"+data[i].modulo).html("<strong>"+no_turno+"</strong>");
									$("#moduloAnun-"+data[i].modulo).removeClass("text-secondary");
									$("#moduloAnun-"+data[i].modulo).addClass("text-primary");
                                }else{
                                    $("#modulo-"+data[i].modulo).text("");
									$("#moduloAnun-"+data[i].modulo).removeClass("text-primary");
									$("#moduloAnun-"+data[i].modulo).addClass("text-secondary");
                                }
                            }
                        }
                    })
                },5000);

                setInterval( function() {
                    $.ajax({
                        url:   '{% url "estado_modulo" %}',
                        type:  'get'
                    });
                },60000);
            });
		</script>
	</body>
</html>